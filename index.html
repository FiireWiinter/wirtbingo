<!DOCTYPE html>
<html>
	<head>
		<title>Wirtual Bingo - twitch.tv/wirtual</title>
		<link rel="stylesheet" href="style.css">
		<link rel="shortcut icon" id="fav" type="image/png" href="favicon.png"/>
		
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Outfit&display=swap" rel="stylesheet">
		
		<script src="https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"></script>
		<script type="text/javascript" src="./entries.js"></script>
		<script type="text/javascript" src="./tipsnotif.js"></script>
		
		<meta charset="utf-8"/>
	</head>
	
	<body>
		<div id="banner"><a onclick="generateSeed()"><img src="logo.png" onmouseenter="showTooltip('Generate New Board')" onmouseleave="noTooltip()" /></a></div>
		<div id="bingo">
			<div id="buttons">
				<div class="button" onclick="generateSeed()">New Board</div>
				<div class="button" onclick="shareSeed()" onmouseenter="showTooltip('Copy Seed to Clipboard')" onmouseleave="noTooltip()" >Share Board</div>
			</div><br>
			
			<table id="slots"></table>
		</div>
		<div id="footer"></div>
		<div id="notif"></div>
		
		<div class="tooltip"></div>
		
		<script>
			let arguments=new URLSearchParams(window.location.search);
			seed=arguments.get("s");
			
			const egg=[
			"Carefully crafted by GV", "By GV, held together by duct tape and spit", "Spaghetti bolognese code by GV", "From the depths of GV's wretched mind", "Three nights of GV's sleep", "GV left no easter eggs here, go away.", 
			"GV joined the game.", "What's a GV", "The GV knows where it is", "You cannot grasp the true form of GV's code"
			];
			
			if (!seed) {
				generateSeed();
			}
			
			rnd=new Math.seedrandom(seed);
			
			generateBoard();
			
			window.addEventListener("resize", resize);
			resize();
			
			/////////////////////////////////////////////////////////////
			
			function resize() { //god bless stackoverflow
				let scale=(window.innerHeight-170)/900;
				let b=document.getElementById("bingo");
				b.style.transform="scale("+scale+")";
				//console.log("resized to "+(scale*100)+"%");
			}
			
			function generateSeed() {
				seed=(Math.floor(Math.random()*10000000000)).toString(36);
				location="?s="+seed; //mmmh yes gimme dat garbage javascript KEKW
			}
			
			function shareSeed() {
				navigator.clipboard.writeText(location.href);
				showNotif("Copied to clipboard! You can paste<br>the link wherever you want to share it.");
			}
			
			function slotCheck(e) {
				e.classList.toggle("checked");
			}
			
			function generateBoard() {
				let chosen=[];
				
				while (chosen.length<25) {
					let pick=bingos[Math.floor(rnd()*bingos.length)];
					if (!chosen.includes(pick)) {
						chosen.push(pick);
					}
				}
				
				let table=document.getElementById("slots");
				let tr=null;
				
				for (let i=0; i<25; i++) {
					if ((i % 5)==0 || !tr) {
						tr=table.insertRow(-1);
					}
					
					let c=tr.insertCell();
					c.innerHTML=chosen[i];
					c.classList.add("slot");
					c.onclick=function () {slotCheck(c);};
				}
				
				generateFooter();
			}
			
			function generateFooter() {
				let f=document.getElementById("footer");
				f.innerHTML=egg[Math.floor(rnd()*egg.length)].replace("GV", "<a href=\"https://github.com/GVmG\" target=_blank>Raechel</a>");
				f.innerHTML+=" • Source code <a href=\"https://github.com/GVmG/wirtbingo/tree/gh-pages\" target=_blank>on GitHub</a> • Font: <a href=\"https://fonts.google.com/specimen/Outfit\" target=_blank>Outfit from Google Fonts</a> • Uses <a href=\"https://github.com/davidbau/seedrandom\" target=_blank>seedrandom.js by David Bau</a> • Now with "+bingos.length+" entries! • Current seed: <a onclick=\"shareSeed()\">"+seed+"<a>";
			}
		</script>
	</body>
</html>
